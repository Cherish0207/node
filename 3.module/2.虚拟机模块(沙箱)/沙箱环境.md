## 虚拟机模块

### 沙箱

> 沙箱概念——干净的环境

场景: 测试用例.
写很多测试，每跑一个测试，希望每一条测试在运行的时候都不会受其他测试的干扰

那我们可以创建一个干净的环境，每跑一个测试，都把当前的测试放到沙箱环境里，运行完再跑下一个，每次都创建一个干净的环境来执行

### 虚拟机模块

内部一般情况下操作的都是字符串逻辑，读到的都是字符串
虚拟机: 虚拟出一个空间，这个空间可以执行你的代码

那么如何让一个字符串来运行？
有以下几个方案:

#### 1. eval(xx)

- 默认会取当前的作用域下的变量---不干净的环境
- 用的很少，除非在很特殊的情况下 有风险，有的浏览器也不兼容

### 2. 使用 new Function 来创建一个沙箱环境,让字符串执行

- 相当于把字符串转换成了 js，并在外面套了一层匿名函数
- 用的比较多

#### vue 模板引擎的实现原理: with 语法 + 字符串拼接 + new Function 
